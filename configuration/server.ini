[server]
uuid = single-server-uuid
name = SFTPPlus
description = Generic description.
account = 
umask = 022
password_minimum_strength = 4
password_minimum_length = 8
password_hashing_scheme = crypt-sha512
authentications = 
	username-blocker-uuid, ban-ip-uuid, DEFAULT-AUTHENTICATION
manager_authentications = ban-ip-uuid, DEFAULT-AUTHENTICATION
ssl_certificate = configuration/ssl_certs.pem
rsa_private_key = configuration/rsa_key

[authentications/DEFAULT-AUTHENTICATION]
enabled = Yes
type = application
name = SFTPPlus Accounts and Administrators
description = This authentication method allows authentication of accounts and
	administrators defined in SFTPPlus' own configuration file.
	By default, it allows any account from any group, as long as the account
	and its group are enabled.
allowed_groups = 
manager_allowed_groups = 

[authentications/username-blocker-uuid]
enabled = Yes
type = deny-username
name = Deny Admin Accounts
description = Deny all administrator accounts.
usernames = root, adm, admin, administrator

[authentications/ban-ip-uuid]
enabled = Yes
type = ip-time-ban
name = Ban IP with multiple failures
description = Will ban the source IP for a certain time on multiple failures.
ban_interval = 600
ban_after_count = 10

[event-handlers/DEFAULT-FILE]
enabled = No
name = Log File
description = Append logs to a file on local filesystem.
type = local-file
path = log/server.log
rotate_external = No
rotate_at_size = Disabled
rotate_on = 00:00 time-of-day
rotate_count = 0

[event-handlers/default-database]
enabled = No
name = Log in database
description = Store log entries into a database for fast
	search and filtering.
	This uses the embedded database which is not suitable for production
	environments that generate lots of log entries.
	By default, it only keeps logs for 1 week.
type = database
path = log/server.db3
auto_delete = 7
fail_after_errors = 0

[event-handlers/other-event-http-uuid]
enabled = False
type = http
name = file-transfer-hooks
description = sent and HTTP POST hook when event is raised
target = 30014, 30015, 30014
usernames = test_user, admin
url = http://requestb.in/revx2hre
http_content_type = json

[services/DEFAULT-MANAGER]
enabled = Yes
name = local-manager
type = manager
description = Service used for managing the server configuration.
address = 0.0.0.0
port = 10020
ssl_cipher_list = secure
ssl_allowed_methods = tlsv1 tlsv1.1 tlsv1.2 tlsv1.3

[services/sftp-1]
enabled = Yes
name = sftp-service
type = ssh
sftp = Yes
scp = No
description = Example of a SFTP only service.
address = 0.0.0.0
port = 10022
rsa_private_key = 
rsa_private_key_password = Disabled
ssh_cipher_list = secure
banner = Welcome to the SFTP Service.
ignore_create_permissions = No
idle_connection_timeout = 300
maximum_concurrent_connections = Disabled

[services/ftps-1]
enabled = Yes
name = ftps-explicit
type = ftp
description = A demo text describing the purpose of this FTP service.
address = 0.0.0.0
port = 10021
banner = Welcome to the FTP/FTPS Service.
ftps_explicit_enabled = Yes
ftps_force_secured_authentication = Yes
ftps_force_secured_command_channel = Yes
ftps_force_secured_data_channel = Yes
enable_password_authentication = Yes
enable_ssl_certificate_authentication = Yes
ignore_ascii_data_type = No
ascii_data_type_as_default = No
idle_connection_timeout = 300
maximum_concurrent_connections = Disabled
idle_data_connection_timeout = 30

[services/https-1]
enabled = Yes
name = https
protocol = https
description = A demo text describing the purpose of this HTTPS service.
address = 0.0.0.0
port = 10443
ssl_certificate_revocation_list = crl-distribution-points

[resources/DEFAULT-LETS-ENCRYPT]
enabled = no
name = Lets-Encrypt-Client
description = Component handling the generation and renewal of Let's Encrypt
	certificates.
type = lets-encrypt
address = 0.0.0.0
port = 80
acme_url = https://acme-v01.api.letsencrypt.org/directory

[resources/DEFAULT-SQLITE]
name = Embedded DB
description = Embedded database using sqlite.
type = sqlite
path = configuration/cache.db3

[resources/DEFAULT-EMAIL-CLIENT]
name = Email-Client
description = STMP client configuration used to send email.
	Update the address and port to match your infrastructure.
type = email-client
email_from_address = sftpplus@example.com
email_to_recipients = admin-team@example.com
address = smtp.example.com
port = 25
username = 
password = 

[resources/DEFAULT-ANALYTICS]
enabled = Yes
type = analytics
name = Analytics engine
description = Collect and report last successful login for
	accounts and administrators.
monitor_interval = 600

[administrators/DEFAULT-ADMINISTRATOR-UUID]
enabled = Yes
name = admin
description = Default administrator.
password = $6$rounds=80000$oPp2OCqqSflb2YN5$KdXiAO6fhkObjBx6tJnS/EZ3bzcxeO1RPvJchBVXR00Gnj5O35fAC07psTBz4KE2AGbq/lZ.ifS7SrkDZmow00
role = DEFAULT-ROLE

[roles/DEFAULT-ROLE]
enabled = Yes
name = Default Super-Administrators
description = Default group for administrators with full rights.

[groups/DEFAULT_GROUP]
name = DEFAULT_GROUP
enabled = Yes
description = This is automatically associated to all
	accounts (application or operating system).
lock_in_home_folder = Yes
home_folder_path = ${OS_HOME}
create_home_folder = No
create_home_folder_owner = ${DEFAULT_OS_USER}
create_home_folder_group = ${DEFAULT_OS_GROUP}
ssh_authorized_keys_path = Disabled
allow_certificate_authentication = No
allow_own_password_change = No

[groups/57e25948-03f9-41eb-9205-cee3e97799ee]
name = test_group
type = group
description = Default group for all application accounts.
home_folder_path = c:\Users
create_home_folder = No
ssh_authorized_keys_path = Disabled
allow_certificate_authentication = No
permissions = allow-full-control
allow_own_password_change = no

[groups/fa810764-abd6-470c-aeba-0337e4ed6f28]
name = partners
enabled = No
description = Group for accounts created for partners.
home_folder_path = c:\Partners
create_home_folder = No
ssh_authorized_keys_path = Disabled
allow_certificate_authentication = No
permissions = allow-read

[accounts/bdb99c31-1119-4b8b-b609-63672a9a0b6f]
name = test_user
type = application
enabled = Yes
description = Incoming files from ACME. Inc.
	Enabled by default.
	The account is not allowed to upload EXE files.
	.
	.
	Default password is test_password
group = 57e25948-03f9-41eb-9205-cee3e97799ee
home_folder_path = /srv/storage/test_user
create_home_folder = No
password = $5$DfjfEI8R1.fpGQg9$A95Q7ENuO2Bfk95k8gCwOP6YzWmVe8vTz2fcPkGpmp6
allow_certificate_authentication = Yes
ssh_authorized_keys_path = Disabled
ssh_authorized_keys_content = 
	ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAAgQC4fV6tSakDSB6ZovygLsf1iC9P3tJHePTKA==
permissions = 
	allow-full-control
	*.exe, allow-read

[remote_admin]

[event-handlers/e137661a-150d-48f4-9239-4d9661492c11]
type = standard-stream
usernames = 
name = Standard Output Logger
components = 
target = 
enabled = True
entry_content = {timestamp.iso_8601_local} {id} {component.uuid} {account.name} {account.peer.address}:{account.peer.port} {message}

